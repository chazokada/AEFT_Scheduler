# Average Earliest Finish Time (AEFT) DAG Scheduling
This repository is inspired by [Heterogeneous system list scheduling algorithm based on improved optimistic cost matrix](https://www.sciencedirect.com/science/article/pii/S0167739X24005405). Git Repo [DAG_Scheduling](https://github.com/sharma-n/DAG_Scheduling/tree/master) by sharma-n was used as a base for evaluation. The following is a combination of work from the previous repo and new additions for AEFT. ChatGPT was used to help with readability, optimization, and some code generation. Additions/changes are highlighted in **bold**.

## Running the Code
Constructing new example DAGs requires the [DAGGEN](https://github.com/frs69wq/daggen) github repository. The code assumes that `daggen.c` is inside folder `/daggen-master/`. 

Required python packages: pandas, numpy, networkx, pydot, matplotlib, and multiprocessing.

### Setting up the environment
1. Install the required packages. Creating a new anaconda environment is suggested.
2. Create a directory called `daggen-master` under the root directory of the project. Build/place the `daggen` executable here (from repo above).
3. Create a directory called `dag` under the root directory of the project (not under `daggen-master`).
4. Run `python make_dags.py`. All `.dot` files will be placed in the `dag` directory from step 3. Modify `make_dags.py` to your choosing.
5. Experiment with `aeft.ipynb`, run `main_parallel.py`, or run `gen_schedule_imgs.py` to output results. These can be modified to your hyperparameter preferences.

**TO RUN INDIVIDUAL ALGORITHMS:**

To run the HEFT algorithm, provide the DAG definition as a `.dot` file:
`$ python heft.py -i test.dot`
For randomHEFT:
`$ python randomHEFT.py -i test.dot`
For IPEFT:
`$ python ipeft.py -i test.dot`
**For AEFT:**
`$ python aeft.py -i test.dot`

## File Descriptions
1. `make_dags.py`: (**changed**) Used to generate new DAGs using DAGGEN with different parameters. The no. of tasks (n), FAT, density, regularity and jump can be set inside this file. All generated DAGs are saved inside the /dag folder with name convention: n_fat_density_regularity_jump.dot
2. `heft.py`: HEFT Scheduler
3. `ipeft.py`: IPEFT Scheduler
4. `randomHEFT.py`: randomHEFT Scheduler
5. `read_dag.py`: Parser of dot file generated by DAGGEN. Takes `.dot` file and outputs an array `[no. of tasks, no. of processors, communication matrix, adjacency matrix]`. Also accepts parameters of CCR, p and beta (heterogeneity of processors)
6. `main_parallel.py`: (**changed**) Evaluates the chosen algorithms over the set of DAGs, accelerated by multiprocessing. Stores output of average makespan in a .pkl file.
7. `All_Results.ipynb`: (**new**) Jupyter notebook for reading in .pkl file as a pandas dataframe. Gives a plot of statistics for the algorithms chosen in `main_parallel.py`.
8. `aeft.ipynb`: (**new**) Jupyter notebook for visualization of the AEFT algorithm. Allows for easy interface to read in a sample DAG. Shows a demonstration that verifies the implementation is correct by constructing the Fig. 1 example from the paper.
9. `gen_schedule_imgs.py` (**new**) Script for generating images showing the schedules from the AEFT algorithm. Images are saved in `images` directory. This demonstrates the MVP for this project.